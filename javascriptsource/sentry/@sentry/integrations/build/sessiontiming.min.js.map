{"version":3,"file":"sessiontiming.min.js","sources":["../src/sessiontiming.ts"],"sourcesContent":["import { Event, EventProcessor, Hub, Integration } from '@sentry/types';\n\n/** This function adds duration since Sentry was initialized till the time event was sent */\nexport class SessionTiming implements Integration {\n  /**\n   * @inheritDoc\n   */\n  public static id: string = 'SessionTiming';\n\n  /**\n   * @inheritDoc\n   */\n  public name: string = SessionTiming.id;\n\n  /** Exact time Client was initialized expressed in milliseconds since Unix Epoch. */\n  protected readonly _startTime: number = Date.now();\n\n  /**\n   * @inheritDoc\n   */\n  public setupOnce(addGlobalEventProcessor: (callback: EventProcessor) => void, getCurrentHub: () => Hub): void {\n    addGlobalEventProcessor(event => {\n      const self = getCurrentHub().getIntegration(SessionTiming);\n      if (self) {\n        return self.process(event);\n      }\n      return event;\n    });\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public process(event: Event): Event {\n    const now = Date.now();\n\n    return {\n      ...event,\n      extra: {\n        ...event.extra,\n        ['session:start']: this._startTime,\n        ['session:duration']: now - this._startTime,\n        ['session:end']: now,\n      },\n    };\n  }\n}\n"],"names":["this","SessionTiming","id","Date","now","addGlobalEventProcessor","getCurrentHub","event","self","getIntegration","process","extra","_startTime"],"mappings":"uSAGA,aASSA,UAAeC,EAAcC,GAGjBF,gBAAqBG,KAAKC,MA+B/C,OA1BSH,sBAAP,SAAiBI,EAA6DC,GAC5ED,EAAwB,SAAAE,GACtB,IAAMC,EAAOF,IAAgBG,eAAeR,GAC5C,OAAIO,EACKA,EAAKE,QAAQH,GAEfA,KAOJN,oBAAP,SAAeM,SACPH,EAAMD,KAAKC,MAEjB,cACKG,IACHI,aACKJ,EAAMI,eACR,iBAAkBX,KAAKY,aACvB,oBAAqBR,EAAMJ,KAAKY,aAChC,eAAgBR,SAnCTH,KAAa"}